# ============================================
# WA Finance Bot - Docker Environment Variables
# ============================================
# Copy file ini ke docker/.env dan sesuaikan dengan kebutuhan
# 
# INSTRUKSI:
# 1. Copy file ini: cp docker/env.example docker/.env
# 2. Edit docker/.env dan sesuaikan semua nilai
# 3. Untuk production, uncomment dan set nilai production
# 4. JANGAN commit file docker/.env ke git!

# ============================================
# Application Environment
# ============================================
# Development: local
# Production: production
APP_ENV=local
APP_DEBUG=true
TZ=Asia/Jakarta

# ============================================
# Backend Laravel Configuration
# ============================================
BACKEND_PORT=8000

# Laravel App Key (generate dengan: php artisan key:generate)
# Set di backend/.env juga
APP_KEY=

# Laravel App URL
# Development: http://localhost:8000
# Production: https://api.yourdomain.com
APP_URL=http://localhost:8000

# ============================================
# Database Configuration
# ============================================
# Development: gunakan default
# Production: gunakan strong password dan sesuaikan host jika perlu
DB_DATABASE=wa_finance
DB_USERNAME=wa_finance
DB_PASSWORD=password
DB_ROOT_PASSWORD=rootpassword
DB_PORT=3306

# ============================================
# Security & API Keys
# ============================================
# Internal API Key (untuk komunikasi n8n <-> backend)
# HARUS SAMA di semua service (backend, n8n workflows)
# Generate random string minimal 32 karakter
# Contoh: openssl rand -hex 32
INTERNAL_API_KEY=change-this-to-secure-random-string-min-32-chars

# WhatsApp Bot Number
# Format: tanpa +, contoh: 6281234567890
# HARUS di-set dengan nomor bot WhatsApp yang sebenarnya
WHATSAPP_BOT_NUMBER=6281234567890

# ============================================
# n8n Configuration
# ============================================
N8N_PORT=5678

# n8n Database Type
# Development: sqlite (default, lebih mudah)
# Production: postgresdb (recommended untuk production)
N8N_DB_TYPE=sqlite

# PostgreSQL Configuration (hanya jika N8N_DB_TYPE=postgresdb)
# Uncomment dan set jika pakai PostgreSQL
# N8N_DB_TYPE=postgresdb
# N8N_DB_HOST=postgres
# N8N_DB_PORT=5432
# N8N_DB_DATABASE=n8n
# N8N_DB_USER=n8n
# N8N_DB_PASSWORD=n8npassword

# n8n Authentication (WAJIB untuk production!)
# Development: false (tidak perlu login)
# Production: true (WAJIB aktifkan!)
N8N_BASIC_AUTH_ACTIVE=false
N8N_BASIC_AUTH_USER=admin
N8N_BASIC_AUTH_PASSWORD=admin

# n8n Protocol & Host
# Development: http
# Production: https
N8N_PROTOCOL=http
N8N_HOST=n8n
N8N_WEBHOOK_URL=http://localhost:5678

# ============================================
# Service URLs (untuk komunikasi antar service)
# ============================================
# Development: pakai service names (internal Docker network)
BACKEND_URL=http://backend
GOWA_URL=http://gowa:3000

# Endpoint API AI (mis. OpenRouter) untuk rewrite gaya gaul
# Contoh: https://openrouter.ai/api/v1/chat/completions
AI_API_URL=http://llm:8000/api/rewrite

# Production: pakai domain (uncomment dan set)
# BACKEND_URL=https://api.yourdomain.com
# GOWA_URL=https://gowa.yourdomain.com
# N8N_WEBHOOK_URL=https://n8n.yourdomain.com

# ============================================
# Frontend Configuration
# ============================================
FRONTEND_PORT=5173

# API URL untuk frontend
# Development: http://localhost:8000
# Production: https://api.yourdomain.com
FRONTEND_API_URL=http://localhost:8000

# ============================================
# GoWA WhatsApp Gateway Configuration
# ============================================
GOWA_PORT=3000
GOWA_WEBHOOK_URL=http://n8n:5678/webhook/wa-in

# ============================================
# Nginx Reverse Proxy (Production)
# ============================================
NGINX_HTTP_PORT=80
NGINX_HTTPS_PORT=443

# ============================================
# Domain Configuration (Production)
# ============================================
# Set domain untuk production
# Uncomment dan sesuaikan dengan domain Anda
# DOMAIN=yourdomain.com
# API_SUBDOMAIN=api
# N8N_SUBDOMAIN=n8n
# GOWA_SUBDOMAIN=gowa
# FRONTEND_SUBDOMAIN=www

# ============================================
# SSL/TLS Configuration (Production)
# ============================================
# Untuk production dengan HTTPS, set path ke SSL certificates
# Let's Encrypt atau custom certificates
# SSL_CERT_PATH=/etc/nginx/ssl/cert.pem
# SSL_KEY_PATH=/etc/nginx/ssl/key.pem

# ============================================
# Backup & Maintenance (Production)
# ============================================
# Database backup schedule (cron format)
# BACKUP_SCHEDULE=0 2 * * *

# Backup retention days
# BACKUP_RETENTION_DAYS=30

# ============================================
# Monitoring & Logging (Production)
# ============================================
# Log level: debug, info, warning, error
LOG_LEVEL=debug

# Sentry DSN (optional, untuk error tracking)
# SENTRY_DSN=

# ============================================
# Email Configuration (Optional)
# ============================================
# Untuk notifikasi email (opsional)
# MAIL_MAILER=smtp
# MAIL_HOST=smtp.gmail.com
# MAIL_PORT=587
# MAIL_USERNAME=your-email@gmail.com
# MAIL_PASSWORD=your-app-password
# MAIL_ENCRYPTION=tls
# MAIL_FROM_ADDRESS=noreply@yourdomain.com
# MAIL_FROM_NAME="CatatBot"

# ============================================
# Production Checklist
# ============================================
# Sebelum deploy ke production, pastikan:
# [ ] APP_ENV=production
# [ ] APP_DEBUG=false
# [ ] APP_KEY sudah di-generate
# [ ] INTERNAL_API_KEY sudah diganti dengan random string yang kuat
# [ ] WHATSAPP_BOT_NUMBER sudah di-set dengan nomor bot yang benar
# [ ] DB_PASSWORD sudah diganti dengan password yang kuat
# [ ] DB_ROOT_PASSWORD sudah diganti dengan password yang kuat
# [ ] N8N_BASIC_AUTH_ACTIVE=true
# [ ] N8N_BASIC_AUTH_PASSWORD sudah diganti dengan password yang kuat
# [ ] N8N_DB_TYPE=postgresdb (jika pakai PostgreSQL)
# [ ] N8N_DB_PASSWORD sudah diganti dengan password yang kuat
# [ ] Semua URL sudah di-set ke domain production (https://)
# [ ] SSL certificates sudah disiapkan
# [ ] Backup strategy sudah disiapkan
# [ ] Monitoring sudah dikonfigurasi
